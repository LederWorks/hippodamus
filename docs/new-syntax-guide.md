# üéØ **New Clean Syntax Guide**

## Overview

Hippodamus now supports a cleaner, more intuitive syntax that clearly separates:
- **Provider Resources** - Generated by providers (like `core-text`, `aws-vpc`)
- **YAML Templates** - Loaded from filesystem template files
- **Direct Elements** - Raw element definitions

## üìã **Provider Declaration**

Declare providers at the config level for reuse throughout your diagram:

```yaml
version: "1.0"

# Declare providers once at the top level
providers:
  # Registry providers (default) - will use upstream GitHub sources when available
  - name: "core"                    # ‚Üí Defaults to type: "registry"
    source: "LederWorks/hippodamus-provider-core"
  
  - name: "aws"
    source: "LederWorks/hippodamus-provider-aws"
    # type: "registry" is implicit (default)
  
  # Builtin providers - explicitly use local/builtin versions
  - name: "core"                    # ‚Üê Same name, different type
    type: "builtin"                 # ‚Üê Forces builtin provider
  
  # Alternative upstream sources - different names for different sources
  - name: "custom-core"             # ‚Üê Different name
    source: "MyOrg/hippodamus-provider-core"
    # type: "registry" is implicit
  
  - name: "enterprise-aws"
    source: "Enterprise/hippodamus-provider-aws"
    version: "^1.2.0"              # Optional version constraint
```

## üéõÔ∏è **Provider Type System**

- **`type: "registry"`** (default) - Prefers upstream GitHub providers
- **`type: "builtin"`** - Forces local builtin providers only

You only need to specify `type: "builtin"` when you want to override the default registry behavior.

## üîß **Element Syntax**

### **Provider Resources** ‚ö°
Clean, simple syntax for provider-generated elements:

```yaml
elements:
  - id: "title"
    resource: "core-text"           # ‚Üê provider-resource format
    parameters:
      label: "Hello World"
      fontSize: 16
      fontStyle: "bold"
  
  - id: "container"
    resource: "core-group"          # ‚Üê Maps to declared "core" provider
    parameters:
      width: 300
      height: 200
      collapsible: true
  
  - id: "vpc"
    resource: "custom-core-shape"   # ‚Üê Uses "custom-core" provider declaration
    parameters:
      shape: "rectangle"
      fillColor: "#E3F2FD"
```

### **YAML Templates** üìÑ
Existing syntax for filesystem templates (unchanged):

```yaml
elements:
  - id: "templated-shape"
    template: "my-yaml-template"    # ‚Üê References filesystem template
    parameters:
      customParam: "value"
```

### **Direct Elements** üéØ
Raw element definitions (unchanged):

```yaml
elements:
  - id: "direct-shape"
    type: "shape"                   # ‚Üê Direct element type
    properties:
      width: 120
      height: 80
      label: "Direct"
      shape: "rectangle"
    style:
      fillColor: "#E8F5E8"
      strokeColor: "#4CAF50"
```

## üîó **Provider Addressing**

### **Default LederWorks Org**
```yaml
providers:
  - name: "core"                    # ‚Üí LederWorks/hippodamus-provider-core
  - name: "aws"                     # ‚Üí LederWorks/hippodamus-provider-aws
```

### **Custom Organizations**
```yaml
providers:
  - name: "my-core"
    source: "MyCompany/hippodamus-provider-core"
  
  - name: "enterprise-aws"
    source: "Enterprise/hippodamus-provider-aws"
    version: "^2.0.0"
```

### **Usage in Elements**
```yaml
elements:
  - resource: "core-text"           # ‚Üê Uses default "core" provider
  - resource: "my-core-text"        # ‚Üê Uses "my-core" custom provider
  - resource: "enterprise-aws-vpc"  # ‚Üê Uses "enterprise-aws" provider
```

## ‚ú® **Benefits**

### **Before (Confusing)**
```yaml
# Was ambiguous - template could be YAML or provider
- type: "template"
  template: "core-text"             # ‚Üê Provider resource?
  
- type: "template"  
  template: "my-yaml-file"          # ‚Üê YAML template?
```

### **After (Clear)**
```yaml
# Crystal clear distinction
- resource: "core-text"             # ‚Üê Obviously a provider resource

- template: "my-yaml-file"          # ‚Üê Obviously a YAML template
```

## üöÄ **Migration Guide**

### **Old Provider Syntax**
```yaml
- type: "template"
  template: "core-text"
  parameters: {...}
```

### **New Provider Syntax**
```yaml
- resource: "core-text"
  parameters: {...}
```

### **YAML Templates** (No Change)
```yaml
- template: "my-yaml-template"
  parameters: {...}
```

## üìö **Complete Example**

```yaml
version: "1.0"

metadata:
  title: "Clean Syntax Demo"

providers:
  - name: "core"
  - name: "aws"
  - name: "custom"
    source: "MyOrg/hippodamus-provider-core"

diagram:
  pages:
    - id: "demo"
      name: "Demo Page"
      elements:
        # Provider resources
        - id: "title"
          resource: "core-text"
          parameters:
            label: "Architecture Diagram"
            fontSize: 18
        
        - id: "aws-vpc"
          resource: "aws-vpc"
          parameters:
            cidr: "10.0.0.0/16"
            region: "us-east-1"
        
        - id: "custom-shape"
          resource: "custom-shape"
          parameters:
            shape: "hexagon"
        
        # YAML template
        - id: "complex-component"
          template: "microservice-template"
          parameters:
            serviceName: "api-gateway"
        
        # Direct element
        - id: "note"
          type: "text"
          properties:
            label: "Note: Clean syntax!"
            x: 100
            y: 50
```

This new syntax provides:
- **Clear separation** between providers and templates
- **Flexible addressing** for different organizations  
- **Backward compatibility** with existing YAML templates
- **Future-ready** for GitHub-based provider loading
