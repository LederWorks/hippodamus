version: "1.0"
metadata:
  title: "Multi-Cloud Enterprise Architecture"
  description: "All cloud organizations under a single enterprise container"

variables:
  enterpriseName: "Global Enterprises Inc"
  
diagram:
  pages:
    - id: "main"
      name: "Enterprise Multi-Cloud Architecture"
      elements:
        # Custom Enterprise Container
        - id: "enterprise-container"
          name: "enterprise-container"
          type: "container"
          properties:
            width: 2000
            height: 1200
            label: "{{.enterpriseName}} - Global Cloud Infrastructure"
            x: 100
            y: 100
          style:
            fillColor: "#F5F5F5"
            strokeColor: "#333333"
            strokeWidth: 3.0
            fontFamily: "Segoe UI"
            fontSize: 20
            fontColor: "#000000"
            fontStyle: "bold"
            textAlign: "center"
            verticalAlign: "top"
            rounded: true
            shadow: true
          nesting:
            mode: "container"
            autoResize: true
            padding:
              top: 60
              right: 30
              bottom: 30
              left: 30
            spacing: 50
            arrangement: "horizontal"

        # AWS Organization under Enterprise Container
        - id: "aws-org"
          name: "aws-org"
          type: "template"
          template: "aws-organization"
          parameters:
            organizationName: "{{.enterpriseName}} AWS"
          dependencies:
            - "enterprise-container"
            
        # Azure Tenant under Enterprise Container
        - id: "azure-tenant"
          name: "azure-tenant"
          type: "template"
          template: "azure-tenant"
          parameters:
            tenantName: "{{.enterpriseName}} Azure AD"
            domain: "globalenterprises.onmicrosoft.com"
          dependencies:
            - "enterprise-container"
            
        # GCP Organization under Enterprise Container
        - id: "gcp-org"
          name: "gcp-org"
          type: "template"
          template: "gcp-organization"
          parameters:
            organizationName: "{{.enterpriseName}} GCP"
          dependencies:
            - "enterprise-container"
            
        # Example Azure Management Group under custom parent
        - id: "azure-prod-mg"
          name: "azure-prod-mg"
          type: "template"
          template: "azure-management-group"
          parameters:
            managementGroupName: "Production MG"
            managementGroupId: "prod-mg-001"
            displayName: "Production Management Group"
          dependencies:
            - "azure-tenant"
            
        # Example Azure Subscription under custom parent (bypassing management group)
        - id: "azure-shared-sub"
          name: "azure-shared-sub"
          type: "template"
          template: "azure-subscription"
          parameters:
            subscriptionName: "Shared Services Subscription"
            subscriptionId: "99999999-8888-7777-6666-555555555555"
            subscriptionType: "Enterprise Agreement"
          dependencies:
            - "azure-tenant"  # Direct parent to tenant, bypassing MG hierarchy
